# 悬浮标记面板 验证清单（MVP）

适用版本：2026-02-15 之后的提交（以本仓库 commits 为准）

## 1. 静态检查（必须）

1. 检查 `app/src/main/AndroidManifest.xml` 不包含网络权限：
   - 目标：不存在 `android.permission.INTERNET`
2. 检查 Manifest 已声明悬浮窗相关能力：
   - 目标：存在 `android.permission.SYSTEM_ALERT_WINDOW`
   - 目标：存在 `android.permission.FOREGROUND_SERVICE`

## 2. 端到端手测路径（必须）

前置：Android 8.0+（API 26+），安装应用。

1. 首次打开应用
   - 预期：页面显示“悬浮窗权限状态：未授权”（如尚未授权）
2. 未授权时点击“开启悬浮面板”
   - 预期：跳转到系统“在其他应用上层显示”授权页面
   - 预期：在授权完成前，不出现悬浮面板
3. 完成授权后返回应用
   - 预期：权限状态刷新为“已授权”
4. 点击“开启悬浮面板”
   - 预期：出现常驻通知（前台服务）
   - 预期：出现悬浮面板，覆盖在其它应用之上
5. 切换到《一起优诺》（或任意其它 App）
   - 预期：悬浮面板仍可见且可点击
6. 增删对手
   - 点击“添加对手”：预期出现 `对手 1 / 对手 2 ...`
   - 点击某个对手行的“删”：预期该对手从列表移除
7. 标记颜色（排除态）
   - 预期：点击 R/Y/B/G 按钮可在“彩色(未排除)”与“灰色(排除态)”之间切换
8. 重置颜色
   - 点击“重置颜色”：预期仅颜色恢复为彩色，对手数量与顺序不变
9. 拖动与锁定
   - 默认“已锁定”：尝试拖动标题，预期不移动
   - 点击“已锁定/已解锁”切换到解锁：拖动标题区域，预期面板移动
   - 再切回锁定：预期不再可拖动
10. 重启恢复（强制）
   - 方式 A：系统设置中“强行停止”后重新打开应用
   - 方式 B：重启设备后再打开应用
   - 预期：对手列表、颜色排除态、位置(x/y)、锁定状态可恢复
11. 关闭悬浮
   - 点击应用内“关闭”，或点击通知中的“关闭”
   - 预期：悬浮面板消失
   - 预期：常驻通知消失，服务停止（无残留）

## 3. 常见 ROM/机型提示文案（建议展示在应用内）

说明：由于不同厂商的后台限制策略，悬浮面板可能在锁屏、切后台或清理后台后消失。以下提示避免承诺“百分百保活”，只提供可行的引导路径。

通用提示：
- “若悬浮面板频繁消失，请在系统设置中允许本应用后台运行，并关闭电池优化/省电限制。”
- “部分机型需要将本应用加入‘自启动/后台白名单’，否则系统可能会停止前台服务。”

MIUI/HyperOS（小米）常见路径（示例文案）：
- “设置 -> 应用设置 -> 应用管理 -> 本应用 -> 省电策略：设为‘无限制’；并在权限管理中允许‘显示在其他应用上层’。”

EMUI/HarmonyOS（华为/荣耀）常见路径（示例文案）：
- “设置 -> 应用 -> 本应用 -> 电池：允许后台活动；并确认已开启‘显示在其他应用上层’权限。”

ColorOS（OPPO/一加/真我）常见路径（示例文案）：
- “设置 -> 应用管理 -> 本应用 -> 耗电管理：允许后台运行；并在‘自启动’中允许本应用。”

注意：
- 文案仅作引导示例，具体路径因系统版本不同会变化。
- 如后续引入更完善的机型检测与引导入口，可在此文档追加对应版本与截图。

